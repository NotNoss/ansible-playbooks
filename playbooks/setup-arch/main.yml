---
- name: Setup Arch Linux
  hosts: local
  connection: local

  tasks:
    - name: Clone yay
      git:
        repo: https://aur.archlinux.org/yay-bin.git
        dest: "/home/noss/yay"
        update: true

    - name: Build and install yay
      command:
        chdir: "/home/noss/yay"
        cmd: "makepkg -sfi --noconfirm"
        creates: /usr/bin/yay

    - name: Delete yay directory
      ansible.builtin.file:
        state: absent
        path: /home/noss/yay 
